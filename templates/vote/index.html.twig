{% extends 'base.html.twig' %}

{% block title %}Votes - Gentlemates{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/vote.css') }}">
{% endblock %}

{% block body %}
<div class="vote-page">
    <div class="vote-container">

        {# PAS DE TITRE AU-DESSUS #}

        {% for type, messages in app.flashes %}
            {% for msg in messages %}
                <div class="alert alert-{{ type }}">{{ msg }}</div>
            {% endfor %}
        {% endfor %}

        {% if rencontres is empty %}
            <p class="vote-empty">Aucun match à venir.</p>
        {% else %}
            <div class="vote-table">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Jeu</th>
                            <th>Pronostic</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for r in rencontres %}
                            {% set gentlemates = r.equipeGentlemates %}
                            {% set adversaire = r.equipeAdversaire %}

                            <tr>
                                <td>{{ r.date|date('d/m H:i') }}</td>
                                <td>{{ r.jeu }}</td>
                                <td>
                                    <div class="vote-match-line">
                                        <form method="post">
                                            <input type="hidden" name="rencontre_id" value="{{ r.id }}">
                                            <button class="vote-team-name-btn"
                                                    name="choix"
                                                    value="GENTLEMATES">
                                                {{ gentlemates.nomAffichage }}
                                            </button>
                                        </form>

                                        <span class="vote-vs">VS</span>

                                        <form method="post">
                                            <input type="hidden" name="rencontre_id" value="{{ r.id }}">
                                            <button class="vote-team-name-btn"
                                                    name="choix"
                                                    value="ADVERSAIRE">
                                                {{ adversaire.nomAffichage }}
                                            </button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endif %}

        <a href="{{ path('app_vote_classement') }}" class="vote-link-classement">
            Voir le classement global →
        </a>

    </div>
</div>
{% endblock %}
